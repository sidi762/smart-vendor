# 基于手势识别的非接触式智能商品售卖机
### 梁思地；刘奕；刘亦骢
## 第一部分  设计概述
### 1.1	设计目的
在后疫情时代，当前在医院、商场等公共场所的自动售卖机主要依靠按钮与触屏方式交互，在当今国外疫情持续高发,国内本土疫情呈多点散发频发的态势下，具有一定疫情传播风险，对用户个人健康也存在一定威胁。非接触式交互具备安全卫生、疫情传播风险小的优点，在后疫情时期具备独特的优势。在此背景下，我们拟设计一种非接触式智能商品售卖机来减少顾客在医院、商场等公共场所购买商品时接触屏幕所带来的疫情传播风险。此装置应用机器视觉技术，通过对用户的手势进行识别实现商品选择、商品确认、支付方式选择等功能，力求达到与现有触屏交互方式相近的交互效率与准确度。我们拟使用Taurus AI 计算机视觉套件对用户的手势进行拍照并利用其NNIE引擎进行本地图像识别检测，将检测结果传输至 Pegasus WiFi-IoT 套件并通过网络完成后续购买流程。同时，我们拟使用Pegasus WiFi-IoT 套件实现售货机与服务器的数据传输，并在终端设备（如小程序、app等）实现销售数据分析查看、货量统计、补货提醒等基本功能。在机器设计上，我们拟利用滑轨等形式，使商品被自行送出售卖机方便用户取货，以达到全程无接触的设计目的。  

### 1.2	应用领域
本作品的关键词为自动售货机和无接触。在现今零售业不景气的情况下，自动售货机的使用可以减少人工成本以及店面租聘费用，以其小巧便捷的特点快速的成为了公共场所的标配，在方便顾客的而同时增加了产品的线下销量，大大推动了线下零售的复苏。除此之外，无接触式也提升了使用售货机的安全性，在不影响顾客消费的同时较少了病毒传播风险，在此时此刻的后疫情时代背景下尤为重要，此为公共安全领域也做出了显著的贡献。
### 1.3	主要技术特点
无接触式手势识别自动售货机的工作网络由3861，3516和小程序通过腾讯云搭建而成。主要技术特点为（1）实现不同平台之间相对低延迟的通讯，使得在检测到有不同信号输入时可以即时的作出反应。（2）利用腾讯云物联网通信平台提供的设备影子功能，保证了设备在意外下线情况下现有数据的保留。（3）实现了微信小程序对于自动售货机销售情况、商品信息的后台获取，方便商家对于商品的管理。（4）在3516平台中使用深度神经网络实现了对于数字手势以及翻页手势的识别。（5）售货机的搭建采用透明亚克力板，方便顾客查看货物剩余情况以及便利商家对售货机维护。


### 1.4	主要创新点
（1）设计了基于手势识别的无接触交互方式
（2）使用了Yolo v3与Resnet 18深度神经网络进行手部检测与手势识别
（3）使用了Hi3516DV300 Taurus AI 套件在板端进行AI推理，无需传输视频流
（4）设计了管理后台小程序，可实现售货机货物智能管理


## 第二部分  系统组成及功能说明
### 2.1	整体介绍

本作品主要包括四个模块：基于Hi3861V100 Pegasus WiFi-IoT平台的传感器、电机驱动及物联网通信模块、基于Hi3516DV300 Taurus AI平台的机器视觉手势识别模块、利用微信小程序实现的可视化界面、管理后台小程序及腾讯云物联网通信服务。其中，传感器、电机驱动及物联网通信模块接收红外传感器输入信号，可使用HiSignaling协议与机器视觉手势识别模块通过UART串口通信，可使用MQTT物联网通信协议与腾讯云物联网通信平台进行通信，并可根据物联网通信平台下发的控制指令控制直流电机工作；机器视觉手势识别模块可获取实时视频流，进行AI手势识别并将识别结果通过UART传输至传感器、电机驱动及物联网通信模块；可视化界面显示供选择的货道信息，通过MQTT协议与物联网通信平台进行通信；管理后台小程序中包括剩余货量查询、货道信息修改等功能，通过MQTT协议与物联网通信平台进行通信。


## 第三部分  完成情况及性能参数
### 软件方面：
3516平台：已完成yolo v3手部检测及resnet18手势识别部分代码；已完成UART串口通信、JSON解析等子模块代码；  
3861平台：已完成MQTT协议通信模块、电机驱动模块、UART串口通信模块与JSON解析相关代码。  

### 硬件方面：
已经完成使用亚克力板搭建售货机的工作，并完成设计了电机驱动通路。在出货电机选择方面，我们使用了N20直流减速电机，并使用了L298N电机驱动板对其进行驱动。我们将3861的GPIO接口与驱动板中控制一个电机的两个IN接口中的一个进行连接，在GPIO接口输出1的 时候电机开始旋转，在GPIO接口输入0的时候点击停止旋转。电机的扭矩充分满足了售货机的工作需求，可以推动商品向前移动。   


## 第四部分  总结
### 4.1	可扩展之处
在此次的设计中我们使用了磁吸侧板，如果此设备在公共场合应用的话，售货机很容易被非法打开侧板并将商品拿走，这个问题可以通过使用电磁铁来解决，当电磁铁通电的时候侧板就会被牢牢的吸在售货机上。在需要补货或者打开侧板查看情况的话，就可以使用微信小程序与3861平台进行通信，断开电磁铁的电源，使得磁铁的磁力消失，使得侧板可以被取下。在售货机的搭建材料方面，可以在重要的承重关键点使用金属材质，增加整体设备的强度。另外，传感器、电机驱动及物联网通信模块可连接更多其他传感器，如温湿度传感器等。  

### 4.2	心得体会  
在此次的设备功能实现的过程中，我们遇到了各种各样的问题。从虚拟机无法正常打开到数据无法正确传输，从硬件设计软件操作不熟悉导致建模报废到亚克力板材质，我们充分的意识到了独立完成一个产品的设计和生产流程是十分困难的，我们在过程中也曾经想过放弃，但是在每一次克服困难以后的兴奋感都推动着我们前行。在完成大体框架的搭建以后，每当我们再回头看过往的经历都觉得是如此的珍贵和有意义。我们在这个比赛中分工明确并且各自都得到了充分的锻炼，我们坚信我们做出的是属于我们最好的选择，能坚持认真完赛是属于我们最哈的决定，每一次突破都是我们最美好的回忆。  
